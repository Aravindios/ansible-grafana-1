# {{ ansible_managed }}

app_mode = {{ grafana_app_mode }}
instance_name = {{ grafana_instance_name }}

[paths]
data = {{ grafana_data_dir }}
logs = {{ grafana_log_dir }}
plugins = {{ grafana_plugins_dir }}

[server]
protocol = {{ grafana_server_protocol }}
{% if grafana_server_http_addr %}
http_addr = {{ grafana_server_http_addr }}
{% else %}
http_addr =
{% endif %}
http_port = {{ grafana_server_http_port }}
domain = {{ grafana_server_domain }}
{% if grafana_server_enforce_domain %}
enforce_domain = true
{% else %}
enforce_domain = false
{% endif %}
root_url = {{ grafana_server_root_url }}
{% if grafana_server_router_logging %}
router_logging = true
{% else %}
router_logging = false
{% endif %}
static_root_path = {{ grafana_server_static_root_path }}
{% if grafana_server_enable_gzip %}
enable_gzip = true
{% else %}
enable_gzip = false
{% endif %}
{% if grafana_server_cert_file %}
cert_file = {{ grafana_server_cert_file }}
{% else %}
cert_file =
{% endif %}
{% if grafana_server_cert_key %}
cert_key = {{ grafana_server_cert_key }}
{% else %}
cert_key =
{% endif %}

[database]
type = {{ grafana_database_type }}
host = {{ grafana_database_host }}
name = {{ grafana_database_name }}
user = {{ grafana_database_user }}
{% if grafana_database_password %}
password = {{ grafana_database_password }}
{% else %}
password =
{% endif %}
ssl_mode = {{ grafana_database_postgres_ssl_mode }}
path = {{ grafana_database_sqlite3_path }}

[session]
provider = {{ grafana_session_provider }}
provider_config = {{ grafana_session_provider_config }}
cookie_name = {{ grafana_session_cookie_name }}
{% if grafana_session_cookie_secure %}
cookie_secure = true
{% else %}
cookie_secure = false
{% endif %}
session_life_time = {{ grafana_session_life_time }}

[analytics]
{% if grafana_analytics_reporting_enabled %}
reporting_enabled = true
{% else %}
reporting_enabled = false
{% endif %}
{% if grafana_analytics_google_analytics_ua_id %}
google_analytics_ua_id = {{ grafana_analytics_google_analytics_ua_id }}
{% else %}
google_analytics_ua_id =
{% endif %}

[security]
admin_user = {{ grafana_security_admin_user }}
admin_password = {{ grafana_security_admin_password }}
secret_key = {{ grafana_security_secret_key }}
login_remember_days = {{ grafana_security_login_remember_days }}
cookie_username = {{ grafana_security_cookie_username }}
cookie_remember_name = {{ grafana_security_cookie_remember_name }}
{% if grafana_security_disable_gravatar %}
disable_gravatar = true
{% else %}
disable_gravatar = false
{% endif %}
{% if grafana_security_data_source_proxy_whitelist %}
data_source_proxy_whitelist = {{ grafana_security_data_source_proxy_whitelist }}
{% else %}
data_source_proxy_whitelist =
{% endif %}

[users]
{% if grafana_users_allow_sign_up %}
allow_sign_up = true
{% else %}
allow_sign_up = false
{% endif %}
{% if grafana_users_allow_org_create %}
allow_org_create = true
{% else %}
allow_org_create = false
{% endif %}
{% if grafana_users_auto_assign_org %}
auto_assign_org = true
{% else %}
auto_assign_org = false
{% endif %}
auto_assign_org_role = {{ grafana_users_auto_assign_org_role }}
login_hint = {{ grafana_users_login_hint }}
default_theme = {{ grafana_users_default_theme }}

[auth.anonymous]
{% if grafana_auth_anonymous_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
org_name = {{ grafana_auth_anonymous_org_name }}
org_role = {{ grafana_auth_anonymous_org_role }}

[auth.github]
{% if grafana_auth_github_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
{% if grafana_auth_github_allow_sign_up %}
allow_sign_up = true
{% else %}
allow_sign_up = false
{% endif %}
client_id = {{ grafana_auth_github_client_id }}
client_secret = {{ grafana_auth_github_client_secret }}
scopes = {{ grafana_auth_github_scopes }}
auth_url = {{ grafana_auth_github_auth_url }}
token_url = {{ grafana_auth_github_token_url }}
api_url = {{ grafana_auth_github_api_url }}
{% if grafana_auth_github_team_ids %}
team_ids = {{ grafana_auth_github_team_ids }}
{% else %}
team_ids =
{% endif %}
{% if grafana_auth_github_allowed_organizations %}
allowed_organizations = {{ grafana_auth_github_allowed_organizations }}
{% else %}
allowed_organizations =
{% endif %}

[auth.google]
{% if grafana_auth_google_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
{% if grafana_auth_google_allow_sign_up %}
allow_sign_up = true
{% else %}
allow_sign_up = false
{% endif %}
client_id = {{ grafana_auth_google_client_id }}
client_secret = {{ grafana_auth_google_client_secret }}
scopes = {{ grafana_auth_google_scopes }}
auth_url = {{ grafana_auth_google_auth_url }}
token_url = {{ grafana_auth_google_token_url }}
api_url = {{ grafana_auth_google_api_url }}
{% if grafana_auth_google_allowed_domains %}
allowed_domains = {{ grafana_auth_google_allowed_domains }}
{% else %}
allowed_domains =
{% endif %}

[auth.proxy]
{% if grafana_auth_proxy_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
header_name = {{ grafana_auth_proxy_header_name }}
header_property = {{ grafana_auth_proxy_header_property }}
{% if grafana_auth_proxy_auto_sign_up %}
auto_sign_up = true
{% else %}
auto_sign_up = false
{% endif %}

[auth.basic]
{% if grafana_auth_basic_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}

[auth.ldap]
{% if grafana_auth_ldap_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
config_file = {{ grafana_auth_ldap_config_file }}

[smtp]
{% if grafana_smtp_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
host = {{ grafana_smtp_host }}
{% if grafana_smtp_user %}
user = {{ grafana_smtp_user }}
{% else %}
user =
{% endif %}
{% if grafana_smtp_password %}
password = {{ grafana_smtp_password }}
{% else %}
password =
{% endif %}
{% if grafana_smtp_cert_file %}
cert_file = {{ grafana_smtp_cert_file }}
{% else %}
cert_file =
{% endif %}
{% if grafana_smtp_key_file %}
key_file = {{ grafana_smtp_key_file }}
{% else %}
key_file =
{% endif %}
{% if grafana_smtp_skip_verify %}
skip_verify = true
{% else %}
skip_verify = false
{% endif %}
from_address = {{ grafana_smtp_from_address }}

[emails]
{% if grafana_emails_welcome_email_on_sign_up %}
welcome_email_on_sign_up = true
{% else %}
welcome_email_on_sign_up = false
{% endif %}

[log]
mode = {{ grafana_log_mode | join(", ") }}
level = {{ grafana_log_level }}

[log.console]
{% if grafana_log_console_level %}
level = {{ grafana_log_console_level }}
{% else %}
level =
{% endif %}
format = {{ grafana_log_console_format }}

[log.file]
{% if grafana_log_file_level %}
level = {{ grafana_log_file_level }}
{% else %}
level =
{% endif %}
format = {{ grafana_log_file_format }}
{% if grafana_log_file_log_rotate %}
log_rotate = true
{% else %}
log_rotate = false
{% endif %}
max_lines = {{ grafana_log_file_max_lines }}
max_size_shift = {{ grafana_log_file_max_size_shift }}
{% if grafana_log_file_daily_rotate %}
daily_rotate = true
{% else %}
daily_rotate = false
{% endif %}
max_days = {{ grafana_log_file_max_days }}

[log.syslog]
{% if grafana_log_syslog_level %}
level = {{ grafana_log_syslog_level }}
{% else %}
level =
{% endif %}
format = {{ grafana_log_syslog_format }}
{% if grafana_log_syslog_network %}
network = {{ grafana_log_syslog_network }}
{% else %}
network =
{% endif %}
{% if grafana_log_syslog_address %}
address = {{ grafana_log_syslog_address }}
{% else %}
address =
{% endif %}
{% if grafana_log_syslog_facility %}
facility = {{ grafana_log_syslog_facility }}
{% else %}
facility =
{% endif %}
{% if grafana_log_syslog_tag %}
tag = {{ grafana_log_syslog_tag }}
{% else %}
tag =
{% endif %}

[event_publisher]
{% if grafana_event_publisher_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
rabbitmq_url = {{ grafana_event_publisher_rabbitmq_url }}
exchange = {{ grafana_event_publisher_exchange }}

[dashboards.json]
{% if grafana_dashboards_json_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
path = {{ grafana_dashboards_json_path }}

[metrics]
{% if grafana_metrics_enabled %}
enabled = true
{% else %}
enabled = false
{% endif %}
interval_seconds = {{ grafana_metrics_interval_seconds }}

[grafana_net]
url = {{ grafana_net_url }}
